---
title: "SentimentAnalysisSports"
author: "Ritesh Kumar"
date: "7/1/2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

## Clear workspace by deleting all variables
```{r clear workspace}
rm(list=ls())
```

## Install and load libraries
```{r, message=FALSE, warning=FALSE}
library(dplyr)
library(rJava)
library(RMongo)
library(twitteR)
library(ROAuth)
library(httr)
library(base64enc)
library(httk)
library(RCurl)
library(jsonlite)
library(RSentiment)
library(stringi)
library(stringr)
```

## Twitter set-up
```{r}
serchHashtagTwitter <- function(hashtag.list, tweet.Count) {
  api_key <- "MJV2Ue0841ZvZcTjlj2ljPbCM"
  api_secret <- "4UJ38gECMGyK6wtmlpd4vxZgb5bWm30SMipJ15D1vFNKToVdwK"
  token <- "147624175-zLAkL4BeyLYo7Il4dpwPg2x7C5WvvGBLOnlW6SWM"
  token_secret <- "1An3nzmzWGxwhjcTXAqmTJhHuBvr8dO74FNEtK9pJABVX"
  
  httr::set_config( config( ssl_verifypeer = 0L ) )
  
  setup_twitter_oauth(
    consumer_key = api_key,
    consumer_secret = api_secret,
    access_token = token,
    access_secret = token_secret)
  
  do.call (
    "rbind", 
    lapply(
      hashtag.list, function(hashtag) {twListToDF(searchTwitter(hashtag, tweet.Count))}))
}
```
## get Dataframe from tweets
```{r}
hashtag.list1 <- list("@IndianCricket")
sports.df <- serchHashtagTwitter(hashtag.list1, 5000)
write.csv(sports.df, file = "data/indian_kabaddi_df.csv")
View(sports.df)
dim(sports.df)


football_tweets = searchTwitter('@IndianFootball', n=5000)
hockey_tweets = searchTwitter('@TheHockeyIndia', n=5000)
cricket_new_tweets = searchTwitter('@IndianCricNews', n=5000)
cricket_tm_tweets = searchTwitter('@IndianCricketTm', n=5000)
indian_sport_tweets = searchTwitter('@IndiaSports', n=5000)

hockey_txt = sapply(hockey_tweets, function(t) t$getText() )
cricket_new_txt = sapply(cricket_new_tweets, function(t) t$getText() )
cricket_tm_txt = sapply(cricket_tm_tweets, function(t) t$getText() )
indian_sport_txt = sapply(indian_sport_tweets, function(t) t$getText() )


```

